<!DOCTYPE html>
<html lang="kr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no">
  <title>피크앤프리 - 장소 상세</title>
  <!-- Google 애드센스 -->
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6014668630461832"
     crossorigin="anonymous"></script>
  <!-- update the version number as needed -->
  <script defer src="/__/firebase/11.7.1/firebase-app-compat.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/11.7.1/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-functions-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-messaging-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-storage-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-analytics-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-remote-config-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-performance-compat.js"></script>
  <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
<script src="js/index.js"></script>
<link href="css/index.css" rel="stylesheet">
  
  <!-- BOOTSTRAP -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  <!-- <link href="css/bootstrap.css" rel="stylesheet"> -->
   <link href="css/index.css" rel="stylesheet">
  <script src="js/jquery-3.7.1.min"></script>

  <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  <style>
    #imgDiv img {
      width: 200px !important;
      height: 200px !important;
      object-fit: cover !important;
    }
    #imgDiv ins {
      width: 200px !important;
      height: 200px !important;
      object-fit: cover !important;
    }
    .weather-summary-line {
      margin-bottom: 0;
    }
    #detail-calendar-container .calendar-cell {
      aspect-ratio: auto;
      height: 40px;
      font-size: 12px;
    }
    #detail-calendar-container .day-number {
      font-size: 12px;
    }
    #detail-calendar-container .price-info {
      font-size: 8px;
    }
  </style>
</head>

<body>
  
<!-- Nav tabs -->
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">기본 정보</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">축제 및 행사</button>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="home" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
    <div class="p-5">
        <div class="modal-title">
            <h5 id="name">일본 도쿄🇯🇵</h5>
            <h6 id="countryInfo"></h6>
        </div>
            <ins class="kakao_ad_area" style="display:none;"
            data-ad-unit = "DAN-PzayrOk7XMxMdybi"
            data-ad-width = "320"
            data-ad-height = "50"></ins>
        <div class="mt-3 d-flex modal-body" id="imgDiv" style="width: 100%; overflow-y: scroll;">
    
        </div>
        <div class="mt-3 modal-body">
            <p>💵 <span id="exchangerate">환율 정보를 제공하지 않는 국가</span></p>
        </div>
        <div class="mt-3 modal-body d-flex align-items-center" id="weather-forecast-section">
            <div id="weather-forecast-container">
                <!-- 날씨 정보가 동적으로 여기에 추가됩니다. -->
            </div>
            <div id="weather-summary" style="text-align: left !important;">
            </div>
        </div>
        <style>
            #weather-forecast-container {
                display: flex;
                overflow-x: auto;
                padding: 10px 5px;
                gap: 10px;
                scrollbar-width: none; /* Firefox */
            }
            #weather-forecast-container::-webkit-scrollbar {
                display: none; /* Safari and Chrome */
            }
            .weather-day-card {
                flex: 0 0 auto;
                width: 50px;
                padding: 10px;
                border-radius: 20px;
                background-color: #FEF7E0;
                text-align: center;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
                color: #333;
                display: flex;
                flex-direction: column;
                justify-content: space-around;
            }
            .weather-day-date {
                font-size: 1rem;
                font-weight: 600;
            }
            .weather-day-icon {
                font-size: 2rem; /* 이모지 크기 */
                line-height: 1.2;
                margin: 4px 0;
            }
            .weather-day-temp {
                font-size: 1.1rem;
                font-weight: 600;
            }
        </style>
        <button class="btn btn-warning" id="bookingBtn" onclick="handleBookingClick()">항공권 예매하기</button>
    </div>
  </div>
  <div class="tab-pane" id="profile" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
  <div class="container calendar-container" id="detail-calendar-container">
    
    <!-- 월 네비게이션 -->
    <div class="month-navigation">
      <button class="nav-btn" onclick="changeMonthForDetail(-1)">‹</button>
      <div class="w-100 d-flex justify-content-center">
        <div class="month-title" id="monthTitle1">2025년 7월</div>
      </div>
      <button class="nav-btn" onclick="changeMonthForDetail(1)">›</button>
    </div>
    
    <!-- 캘린더 1개 -->
    <div class="row">
      <div class="col-md-12">
        <div class="calendar-grid" id="calendar1"></div>
      </div>
      </div>
    </div>

    <!-- ✅ 여기 축제 정보 블록 추가 -->
    <div id="festivalInfo" style="margin-top:20px; padding:10px; border-top:1px solid #ccc;">
      📅 여기에 축제 정보가 표시됩니다
    </div>

  </div>
</div>

    

  <script>
    let current_nationname = ""
    function renderCalendar() {
        const firstMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        let month1Title = `${firstMonth.getFullYear()}년 ${monthNames[firstMonth.getMonth()]}`;

        if (window.parent.seasonData && current_nationname && window.parent.seasonData[current_nationname]) {
            const countrySeasonData = window.parent.seasonData[current_nationname];
            const month1 = firstMonth.getMonth() + 1;

            if (countrySeasonData[month1] === '1') {
                month1Title += ' 🔥';
            } else if (countrySeasonData[month1] === '2' || countrySeasonData[month1] === '3') {
                month1Title += ' 😴';
            }
        }

        document.getElementById('monthTitle1').textContent = month1Title;
        renderMonthCalendar('calendar1', firstMonth);
    }
    // 예매하기 버튼 클릭 핸들러
    function handleBookingClick() {
        console.log('예매하기 버튼 클릭됨');
        
        // 모달 닫기
        if (window.parent) {
            try {
                const modal = window.parent.bootstrap.Modal.getInstance(window.parent.document.getElementById('detailModal'));
                if (modal) {
                    modal.hide();
                }
            } catch (e) {
                console.log('모달 닫기 실패:', e);
            }
        }
        
        // 부모 창의 달력 잠금 해제 함수 호출
        if (window.parent && window.parent.unlockCalendarSectionFromMap) {
            window.parent.unlockCalendarSectionFromMap();
        } else if (window.parent && window.parent.parent && window.parent.parent.unlockCalendarSectionFromMap) {
            window.parent.parent.unlockCalendarSectionFromMap();
        } else {
            // 직접 처리
            try {
                if (window.parent) {
                    const parentDoc = window.parent.document;
                    const initialAction = parentDoc.getElementById('initialAction');
                    const calendarSection = parentDoc.querySelector('.calendar-section');
                    
                    if (initialAction) {
                        initialAction.style.display = 'none';
                    }
                    if (calendarSection) {
                        calendarSection.style.display = 'block';
                        calendarSection.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    }
                }
            } catch (e) {
                console.log('직접 처리 실패:', e);
            }
        }
        
        // sessionStorage에 예매 정보 저장
        if (current_cityname && current_nationname) {
            sessionStorage.setItem('selectedDestination', `${current_nationname} ${current_cityname}`);
            sessionStorage.setItem('bookingAction', 'true');
            if (current_iata) {
                sessionStorage.setItem('selectedAirportCode', current_iata);
            }
        }
    }
    function updateFestival(arr) {
      const div = document.getElementById("festivalInfo")
      var html = "<ul>"

    for (let item of arr) {
    const date = item["개최일"] || ""
    const name = item["축제명"] || "(이름 없음)"
    const feature = item["특징"] || ""
    const site = item["공식/정보 사이트"] || ""


    const siteLink = site
      ? `<a href="${site}" target="_blank" rel="noopener noreferrer">관련링크</a>`
      : ""

    html += `<li>${date} <strong>${name}</strong> - ${feature} ${siteLink}</li>`
  }

  html += "</ul>"
  div.innerHTML = html
}

    function changeMonthForDetail(delta) {
      
    changeMonth(delta)
    const monthNames = ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'];
    const currentMonthName = monthNames[currentDate.getMonth()];
    // Firebase 함수 호출
    firebase
      .functions()
      .httpsCallable('getFestivalInfo')({
        country: current_nationname.trim(),
        month: currentMonthName
      })
      .then((result) => {
        console.log(result)
        if (result.data.festivals) {
          updateFestival(result.data.festivals)
        } else if (result.data.error) {
          
        }
      })
      .catch((error) => {
        console.log("ERROR!", error);
      });

    }
    async function loadImg(coord1, coord2, cityname, nationname) {
        const pixabayApiKey = '52281114-88b2ee02640359c4a109ad9a7';

        const fetchImagesFromPixabay = async () => {
            console.log("Google Places API 실패. Pixabay API로 대체합니다.");
            let searchQuery = cityname && cityname !== 'null' ? cityname : nationname;

            const query = encodeURIComponent(searchQuery);
            const pixabayUrl = `https://pixabay.com/api/?key=${pixabayApiKey}&q=${query}&image_type=photo&per_page=10`;

            try {
                const response = await fetch(pixabayUrl);
                const data = await response.json();

                if (data.hits && data.hits.length > 0) {
                    $("#imgDiv").empty();
                    data.hits.forEach(hit => {
                        const img = $(`<img class="rounded m-1" src="${hit.webformatURL}"/>`);
                        $("#imgDiv").append(img);
                    });
                    console.log("Pixabay 이미지 로드 성공.");
                } else {
                    $("#imgDiv").text("주변의 추천 장소 이미지를 찾지 못했습니다.");
                }
            } catch (pixabayError) {
                console.error("Pixabay API 호출 중 에러 발생:", pixabayError);
                $("#imgDiv").text("이미지를 불러오는 데 실패했습니다.");
            }
        };

        const getImagesFn = firebase.functions().httpsCallable('getPlaceImages');
        try {
            const cachedResult = await getImagesFn({ lat: coord1, lon: coord2 });

            if (cachedResult.data && cachedResult.data.length > 0) {
                console.log("이미지 캐시 발견! DB에서 로드합니다.");
                $("#imgDiv").empty();
                cachedResult.data.forEach(url => {
                    const img = $(`<img class="rounded m-1" src="${url}"/>`);
                    $("#imgDiv").append(img);
                });

            } else {
                console.log("이미지 캐시 없음. Google Places API를 호출합니다.");
                try {
                    const { Place, SearchNearbyRankPreference } = await google.maps.importLibrary("places");
                    let center = new google.maps.LatLng(coord1, coord2);
                    const request = {
                        fields: ["displayName", "photos"],
                        locationRestriction: {
                            center: center,
                            radius: 30000,
                        },
                        includedPrimaryTypes: ["cultural_landmark", "historical_landmark", "beach", "hiking_area"],
                        maxResultCount: 10,
                        rankPreference: SearchNearbyRankPreference.POPULARITY,
                        language: "ko-kr",
                    };

                    const { places } = await Place.searchNearby(request);

                    if (places.length > 0 && places[0].photos && places[0].photos.length > 0) {
                        const imageUrls = places.map(place => place.photos[0].getURI({ maxWidth: 400, maxHeight: 400 }));

                        // Display images
                        $("#imgDiv").empty();
                        imageUrls.forEach(url => {
                            const img = $(`<img class="rounded m-1" src="${url}"/>`);
                            $("#imgDiv").append(img);
                        });

                        // Store images in cache for next time
                        const storeImagesFn = firebase.functions().httpsCallable('storePlaceImages');
                        await storeImagesFn({ lat: coord1, lon: coord2, urls: imageUrls });
                        console.log("새로운 이미지를 캐시에 저장했습니다.");

                    } else {
                        await fetchImagesFromPixabay();
                    }
                } catch (googleError) {
                    console.error("Google Places API 호출 중 에러 발생:", googleError);
                    await fetchImagesFromPixabay();
                }
            }
        } catch (error) {
            console.error("이미지 로딩 중 에러 발생:", error);
            await fetchImagesFromPixabay();
        }
    }
        
    document.addEventListener('DOMContentLoaded', function () {

        let query = window.location.search;
        let param = new URLSearchParams(query);
        let coord1 = param.get('coord2');
        let coord2 = param.get('coord1');
        let cityname = param.get('Cityname');
        let nationname = param.get('Nationname');
        current_nationname = nationname
                g_currentNation = nationname;
        const checkSeasonData = setInterval(() => {
            if (window.parent.seasonData) {
                clearInterval(checkSeasonData);
                if(typeof renderCalendar === 'function') {
                    renderCalendar();
                }
            }
        }, 100);

        $("#name").text(nationname + " " + cityname)
      //구글맵
      firebase.functions().httpsCallable('getGoogleMapAPIKey')().then((result) => {
        (g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })({
          key: result.data,
          v: "weekly",
          // Use the 'v' parameter to indicate the version to use (weekly, beta, alpha, etc.).
          // Add other bootstrap parameters as needed, using camel case.
        });
        console.log("Google map ready")
        loadImg(Number(coord1), Number(coord2), cityname, nationname)
      }).catch((error) => {
        console.log("ERROR!", error);
      });

    const monthNames = ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'];
    const currentMonthName = monthNames[currentDate.getMonth()];
    // Firebase 함수 호출
    firebase
      .functions()
      .httpsCallable('getFestivalInfo')({
        country: nationname,
        month: currentMonthName
      })
      .then((result) => {
        console.log(result)
        if (result.data.festivals) {
          updateFestival(result.data.festivals)
        } else if (result.data.error) {
          
        }
      })
      .catch((error) => {
        console.log("ERROR!", error);
      });

      function weatherTypeToEmoji(type) {
        const mapping = {
            'CLEAR': '☀️',
            'MOSTLY_CLEAR': '🌤️',
            'PARTLY_CLOUDY': '⛅️',
            'MOSTLY_CLOUDY': '🌥️',
            'CLOUDY': '☁️',
            'WINDY': '🌬️',
            'WIND_AND_RAIN': '🌧️',
            'LIGHT_RAIN_SHOWERS': '🌦️',
            'CHANCE_OF_SHOWERS': '🌦️',
            'SCATTERED_SHOWERS': '🌦️',
            'RAIN_SHOWERS': '🌦️',
            'HEAVY_RAIN_SHOWERS': '🌧️',
            'LIGHT_TO_MODERATE_RAIN': '🌧️',
            'MODERATE_TO_HEAVY_RAIN': '🌧️',
            'RAIN': '🌧️',
            'LIGHT_RAIN': '🌦️',
            'HEAVY_RAIN': '🌧️',
            'RAIN_PERIODICALLY_HEAVY': '🌧️',
            'LIGHT_SNOW_SHOWERS': '🌨️',
            'CHANCE_OF_SNOW_SHOWERS': '🌨️',
            'SCATTERED_SNOW_SHOWERS': '🌨️',
            'SNOW_SHOWERS': '🌨️',
            'HEAVY_SNOW_SHOWERS': '❄️',
            'LIGHT_TO_MODERATE_SNOW': '🌨️',
            'MODERATE_TO_HEAVY_SNOW': '❄️',
            'SNOW': '❄️',
            'LIGHT_SNOW': '🌨️',
            'HEAVY_SNOW': '❄️',
            'SNOWSTORM': '❄️',
            'SNOW_PERIODICALLY_HEAVY': '❄️',
            'HEAVY_SNOW_STORM': '❄️',
            'BLOWING_SNOW': '🌬️❄️',
            'RAIN_AND_SNOW': '🌨️',
            'HAIL': '🌨️',
            'HAIL_SHOWERS': '🌨️',
            'THUNDERSTORM': '⛈️',
            'THUNDERSHOWER': '⛈️',
            'LIGHT_THUNDERSTORM_RAIN': '⛈️',
            'SCATTERED_THUNDERSTORMS': '⛈️',
            'HEAVY_THUNDERSTORM': '⛈️',
            'FOG': '🌫️',
            'HAZE': '🌫️',
            'DUST': '💨'
        };
        return mapping[type] || '❓';
      }

      console.log("날씨를 불러옵니다.")
      firebase.functions().httpsCallable('getWeatherForecast')({
        lat: Number(coord1),
        lon: Number(coord2),
        days: 8,
      }).then(result => {
        console.log(result.data)
        const forecasts = result.data;
        if (forecasts && forecasts.length > 0) {
            $("#weather-forecast-container").empty(); // 기존 카드 비우기

            let totalTemp = 0;
            let totalPrecipProb = 0;

            forecasts.forEach((day, index) => {
                const dateParts = day.date.split('-');
                const month = parseInt(dateParts[1], 10);
                const dayOfMonth = parseInt(dateParts[2], 10);
                const displayDate = `${month}/${dayOfMonth}`;

                const temp = Math.round(day.maxTemp);
                const emoji = weatherTypeToEmoji(day.daytime.type);

                totalTemp += (day.maxTemp + day.minTemp) / 2;
                totalPrecipProb += (day.daytime.precipProbPercent + day.nighttime.precipProbPercent) / 2;

                const cardHtml = `
                    <div class="weather-day-card" id="weather-day-${index}">
                        <div class="weather-day-date">${displayDate}</div>
                        <div class="weather-day-icon">${emoji}</div>
                        <div class="weather-day-temp">${temp}°</div>
                    </div>
                `;
                $("#weather-forecast-container").append(cardHtml);
            });

            const avgTemp = Math.round(totalTemp / forecasts.length);
            const avgPrecipProb = Math.round(totalPrecipProb / forecasts.length);

            const summaryHtml = `
                <p class="weather-summary-line">평균기온: ${avgTemp}°</p>
                <p class="weather-summary-line">강수확률: ${avgPrecipProb}%</p>
            `;
            $("#weather-summary").html(summaryHtml);

        }
      }).catch(error => {
        console.error("날씨 정보 로딩 에러!", error);
        $('#weather-forecast-section').hide();
      });

      // // 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥
      // // The Firebase SDK is initialized and available here!
      //
      // firebase.auth().onAuthStateChanged(user => { });
      // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
      // firebase.firestore().doc('/foo/bar').get().then(() => { });
      // firebase.functions().httpsCallable('yourFunction')().then(() => { });
      // firebase.messaging().requestPermission().then(() => { });
      // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
firebase.functions().httpsCallable('getLatestExchangeRate')().then((result) => {
    console.log('환율 데이터:', result.data);
    console.log('현재 nationname:', nationname);
    
    if (!result.data || !Array.isArray(result.data)) {
        console.log('환율 데이터가 배열이 아니거나 없습니다.');
        $("#exchangerate").text("환율 정보를 가져올 수 없습니다.");
        return;
    }
    
    if (!nationname) {
        console.log('nationname이 없습니다.');
        $("#exchangerate").text("국가 정보가 없습니다.");
        return;
    }
    
    let found = false;
    
    const countryMapping = {
        '미국': '미국달러',
        '중국': '위안',
        '일본': '일본엔', 
        '영국': '영국파운드',
        '캐나다': '캐나다달러',
        '스위스': '스위스프랑',
        '홍콩': '홍콩달러',
        '스웨덴': '스웨덴크로나',
        '오스트레일리아': '호주달러',
        '덴마크': '덴마크크로나',
        '노르웨이': '노르웨이크로나',
        '사우디아라비아': '사우디아라비아리얄',
        '쿠웨이트': '쿠웨이트디나르',
        '바레인': '바레인디나르',
        '아랍에미리트': '아랍에미리트디르함',
        '싱가포르': '싱가포르달러',
        '말레이시아': '말레이지아링깃',
        '뉴질랜드': '뉴질랜드달러',
        '태국': '태국바트',
        '인도네시아': '인도네시아루피아',
        '대만': '대만달러',
        '몽골': '몽골투그릭',
        '카자흐스탄': '카자흐스탄텡게',
        '필리핀': '필리핀페소',
        '베트남': '베트남동',
        '브루나이': '브루나이달러',
        '인도': '인도루피',
        '파키스탄': '파키스탄루피',
        '방글라데시': '방글라데시타카',
        '멕시코': '멕시코 페소',
        '브라질': '브라질 헤알',
        '아르헨티나': '아르헨티나페소',
        '러시아': '러시아루블',
        '헝가리': '헝가리포린트',
        '폴란드': '폴란트즈워티',
        '체코': '체코코루나',
        '카타르': '카타르리얄',
        '이스라엘': '이스라엘셰켈',
        '요르단': '요르단디나르',
        '튀르키예': '튀르키예리라',
        '터키': '튀르키예리라', // 터키 별칭
        '남아프리카공화국': '남아프리카공화국랜드',
        '남아공': '남아프리카공화국랜드', // 남아공 별칭
        '이집트': '이집트파운드'
    };
    
    // 국가명에서 매칭할 통화 찾기
    const currencyToFind = countryMapping[nationname];
    
    if (currencyToFind) {
        for(let item of result.data) {
            if(item.id && item.id.indexOf(currencyToFind) != -1) {
                $("#exchangerate").text(item.id + " " + item.value + "원");
                found = true;
                console.log('환율 설정:', item.id, item.value);
                break;
            }
        }
    }
    
    if (!found) {
        console.log('해당 국가의 환율 정보를 찾지 못했습니다.');
        console.log('찾으려던 통화:', currencyToFind);
        $("#exchangerate").text("해당 국가의 환율 정보를 제공하지 않습니다.");
    }
    
}).catch((error) => {
    console.log("환율 ERROR!", error);
    $("#exchangerate").text("환율 정보 로딩 실패");
});

    function updateCountry(country) {
    const div = document.getElementById("countryInfo");
    div.textContent = country;
}

// 국가 정보 추가
firebase.functions().httpsCallable('getCountryInfo')({
    country: nationname ? nationname.trim() : "",
  })
  .then((result) => {
    console.log(result)
    if (result.data.country) {
      updateCountry(result.data.country[0]["국가 한줄소개"])
    } else if (result.data.error) {
    }
  })
  .catch((error) => {
    console.log("ERROR!", error);
  });



    //   firebase.analytics().logEvent('tutorial_completed');
      // firebase.performance(); // call to activate
      //
      // // 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>`
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script> -->
</body>

</html>
