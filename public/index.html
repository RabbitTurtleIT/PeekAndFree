<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>í”¼í¬ì•¤í”„ë¦¬</title>

  <!-- Google ì• ë“œì„¼ìŠ¤ -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6014668630461832" crossorigin="anonymous"></script>
  
  <!-- Firebase Scripts -->
  <script defer src="/__/firebase/11.7.1/firebase-app-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-functions-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-messaging-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-storage-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-analytics-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-remote-config-compat.js"></script>
  <script defer src="/__/firebase/11.7.1/firebase-performance-compat.js"></script>
  <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  
  <!-- Mapbox CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.css" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link href="css/index.css" rel="stylesheet">
  
  <!-- jQuery -->
  <script src="js/jquery-3.7.1.min"></script>
  
  <!-- Mapbox JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.js"></script>
  
  <!-- Custom JS -->
  <script src="js/index.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/countryalert.js"></script>
  <script src="js/map.js"></script>
</head>

<body>
  <!-- Loading Spinner -->
  <div id="loading" class="position-fixed w-100 h-100 text-center" style="z-index: 10; display: flex;">
    <div style="margin: auto;">
      <div class="spinner-border" role="status"></div>
    </div>
  </div>
  <!-- Header -->
  <header class="top d-flex justify-content-between align-items-center border-bottom px-4 py-3">
    <div class="logo">
      <img src="img/logo.png" style="height: 50px;" alt="í”¼í¬ì•¤í”„ë¦¬ ë¡œê³ ">
    </div>
    <div class="search-bar d-flex align-items-center gap-2">
      <input type="text" placeholder="ì¥ì–´ ë®ë°¥ì´ ë§›ìˆëŠ” ì¼ë³¸ ë‚˜ê³ ì•¼" class="form-control rounded-pill border-2" style="width: 260px;">
      <button class="search-btn btn p-1">
        <img src="img/search.png" alt="ê²€ìƒ‰">
      </button>
      <button id="mypage-btn" class="mypage-btn btn p-1" type="button">
        <img src="img/account_circle.png" alt="ë§ˆì´í˜ì´ì§€">
      </button>
    </div>
  </header>
  <!-- Main Carousel Section -->
  <!-- <section class="main-section">
    <div class="carousel-wrapper">
      <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner rounded">
          <div class="carousel-item active px-5">
            <img src="img/epic_x.png" class="d-block w-100" style="object-fit: cover;" alt="ë©”ì¸ ì´ë¯¸ì§€ 1">
          </div>
          <div class="carousel-item px-5">
            <img src="img/Rectangle 25.png" class="d-block w-100" style="object-fit: cover;" alt="ë©”ì¸ ì´ë¯¸ì§€ 2">
          </div>
          <div class="carousel-item px-5">
            <img src="img/Rectangle 25.png" class="d-block w-100" style="object-fit: cover;" alt="ë©”ì¸ ì´ë¯¸ì§€ 3">
          </div>
          <div class="carousel-item px-5">
            <img src="img/Rectangle 25.png" class="d-block w-100" style="object-fit: cover;" alt="ë©”ì¸ ì´ë¯¸ì§€ 4">
          </div>
          <div class="carousel-item px-5">
            <img src="img/Rectangle 25.png" class="d-block w-100" style="object-fit: cover;" alt="ë©”ì¸ ì´ë¯¸ì§€ 5">
          </div>
        </div>
        
        <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">ì´ì „</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">ë‹¤ìŒ</span>
        </button>
      </div>
      
      <div class="custom-indicators text-center mt-3">
        <img src="img/btn_unselected.png" class="indicator-dot" data-index="0" alt="ì¸ë””ì¼€ì´í„° 1">
        <img src="img/btn_unselected.png" class="indicator-dot" data-index="1" alt="ì¸ë””ì¼€ì´í„° 2">
        <img src="img/btn_unselected.png" class="indicator-dot" data-index="2" alt="ì¸ë””ì¼€ì´í„° 3">
        <img src="img/btn_unselected.png" class="indicator-dot" data-index="3" alt="ì¸ë””ì¼€ì´í„° 4">
        <img src="img/btn_unselected.png" class="indicator-dot" data-index="4" alt="ì¸ë””ì¼€ì´í„° 5">
      </div>
    </div>
  </section> -->
  <!-- Travel Planning Section -->
  <!-- <section class="select text-center">
    <h1 class="fw-bold mb-2">ì—¬í–‰ì„ ì–¼ë§ˆë‚˜ ê³„íší•˜ì…¨ë‚˜ìš”?</h1>
    <p class="additional-text text-muted mb-4">peak and freeê°€ ì—¬í–‰ ì¤€ë¹„ë¥¼ ë„ì™€ë“œë¦´ê²Œìš”!</p>
    <div class="btn-toggle-wrap">
      <button id="btn-when" class="btn-toggle active">ì–¸ì œ ë– ë‚ ì§€ ì •í–ˆì–´ìš”!</button>
      <button id="btn-where" class="btn-toggle">ì–´ë””ë¡œ ë– ë‚ ì§€ ì •í–ˆì–´ìš”!</button>
    </div>
  </section> -->


  <!-- When Content Section -->
  <section id="when-content" class="select-result" style="display: block;">
  
    <div id="festivalTable"></div>
    <section class="map-section">
      <div class="map-background">
        <div class="whereFetchDone"></div>
        <div class="map-search d-flex justify-content-center align-items-center">
          <input type="text" class="form-control search-input" id="searchbox" placeholder="ë„ì‹œ, ë‚˜ë¼ ë˜ëŠ” ê³µí•­">
        </div>
        
        <div class="container map-container" id="when-mapdiv">
          <div id="map" style="width: 100%; height: 100vh;">
            <div class="nearby-btn-group" style="position: absolute; z-index: 1;">
              <button class="btn-budget">ì˜ˆì‚°ì— ê°€ê¹Œìš´ ì§€ì—­</button>
              <button class="btn-nearby">ë‚˜ì™€ ê°€ê¹Œìš´ ì§€ì—­</button>
            </div>
          </div>
        </div>
        
        <div class="container-sm">
          <div id="nearbyFlightList" class="mt-3 pb-3 text-center"></div>
        </div>
      </div>
    </section>
    <section class="calendar-section" id="when-calsec">
      <div class="container calendar-container">
        <div class="month-navigation">
          <button class="nav-btn" onclick="changeMonth(-1)">â€¹</button>
          <div class="w-100 d-flex justify-content-around">
            <div class="month-title" id="monthTitle1">2025ë…„ 7ì›”</div>
            <div class="month-title" id="monthTitle2">2025ë…„ 8ì›”</div>
          </div>
          <button class="nav-btn" onclick="changeMonth(1)">â€º</button>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="calendar-grid" id="calendar1"></div>
          </div>
          <div class="col-md-6">
            <div class="calendar-grid" id="calendar2"></div>
          </div>
        </div>
      </div>
      <div id="calendar"></div>
      <div class="align-items-center">
        <iframe border="0" src="https://kr.trip.com/partners/ad/DB4609600?Allianceid=6823342&SID=242256162&trip_sub1=" style="width:728px;height:90px" frameborder="0" scrolling="no" style="border:none" id="DB4609600"></iframe>
      </div>
    </section>

  </section>
  <!-- Final Reservation Section -->
  <section class="final-reservation">
    <div class="reservation-background"></div>
    <div class="reservation-content mt-5" style="z-index: 1;">
      <div class="map-background p-3 text-center">
        <div class="container">
          <h4>ğŸ“…<span id="startDate"></span> ~ <span id="endDate"></span></h4>
          <h4>ğŸŒ <span id="viewLocationName"></span> â€¢ ğŸ‘¤<span id="viewCountPeople"></span> â€¢ ğŸ’º<span id="viewSeatClass"></span></h4>
          <br>
          <div id="skyscannerDiv">

          </div>
        </div>
      </div>
  </section>
  
      <!-- í•´ì™¸ ì•ˆì „ ì •ë³´ -->
      <div class="container">
        <div class="content mt-3 mb-3">
          <h4>í•´ì™¸ ì•ˆì „ ì†Œì‹ë„ ì•Œì•„ê°€ì„¸ìš” â›‘ï¸</h4>
          <div id="countryalert" class="row justify-content-between"></div>
        </div>
      </div>
    </div>


  <div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl">
      <div class="modal-content">
        <div class="modal-body ">
          <iframe class="w-100" height="600px" src="detailmodal.html" id="detailFrame"></iframe>
        </div>
      </div>
    </div>
  </div>



  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9CJ1EX0RKW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-9CJ1EX0RKW');
  </script>


  <!-- Firebase Initialization -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      
      // ì•ˆì „ì •ë³´
      // firebase.functions().httpsCallable('getInformationOfCountry')({iata : "ICN"}).then((result) => {
      //   displaySafetyNotices(result.data.response.body);
      // }).catch((error) => {
      //   console.log("ERROR!", error);
      // });

      firebase.functions().httpsCallable('getFestivalInfo')({ country: "ì¸ë„" })
  .then((result) => {
    if (result.data.festivals) {
      console.log(result.data.festivals);
    } else if (result.data.error) {
      console.log("Error:", result.data.error);
    }
  })
  .catch((error) => {
    console.log("ERROR!", error);
  });


  


      // firebase.functions().httpsCallable('getInformationOfCountry')().then((result) => {
      //   console.log("í•´ì™¸ì•ˆì „ì •ë³´");
      //   displaySafetyNotices(result.data.response.body);
      // }).catch((error) => {
      //   console.log("ERROR!", error);
      // });


      // firebase.analytics();



      firebase.analytics();


      try {
        let app = firebase.app();
        let features = [
          'auth',
          'database',
          'firestore',
          'functions',
          'messaging',
          'storage',
          'analytics',
          'remoteConfig',
          'performance',
        ].filter(feature => typeof app[feature] === 'function');
      } catch (e) {
        console.error(e);
      }
    });
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
</body>

</html>